# 08-2 ê°€ìƒí•¨ìˆ˜(Virtual Function)

---

## ê¸°ì´ˆ í´ë˜ìŠ¤ì˜ í¬ì¸í„°ë¡œ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ë©´,

```cpp
#include <iostream>
using namespace std;

class Base {
public:
    void BaseFunc() { cout << "Base Function" << endl; }
};

class Derived : public Base {
public:
    void DerivedFunc() { cout << "Derived Function" << endl; }
};

int main(void) {
    Base * bptr = new Derived(); // ì»´íŒŒì¼ OK!
    bptr->DerivedFunc(); // ì»´íŒŒì¼ Error!
}
```

<aside>
ğŸ“Œ C++ ì»´íŒŒì¼ëŸ¬ëŠ” í¬ì¸í„° ì—°ì‚°ì˜ ê°€ëŠ¥ì„± ì—¬ë¶€ë¥¼ íŒë‹¨í•  ë•Œ, **í¬ì¸í„°ì˜ ìë£Œí˜•ì„ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨**í•˜ì§€, ì‹¤ì œ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ ìë£Œí˜•ì„ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

</aside>

```cpp
#include <iostream>
using namespace std;

class Base {
public:
    void BaseFunc() { cout << "Base Function" << endl; }
};

class Derived : public Base {
public:
    void DerivedFunc() { cout << "Derived Function" << endl; }
};

int main(void) {
    Base * bptr = new Derived(); // ì»´íŒŒì¼ OK!
		// Derived í´ë˜ìŠ¤ëŠ” Base í´ë˜ìŠ¤ì˜ ìœ ë„ í´ë˜ìŠ¤ë‹ˆê¹Œ Base í´ë˜ìŠ¤ì˜ í¬ì¸í„° ë³€ìˆ˜ë¡œ Derived ê°ì²´ì˜ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤.
    Derived * dptr = bptr; // ì»´íŒŒì¼ Error!
		// bptrì€ Baseí˜• í¬ì¸í„°ë‹ˆê¹Œ bptrì´ ê°€ë¦¬í‚¤ëŠ” ëŒ€ìƒì€ Base ê°ì²´ì¼ ìˆ˜ë„ ìˆëŠ” ê±°ì–ì•„! ê·¸ëŸ´ ê²½ìš°ì—ëŠ” ì´ ë¬¸ì¥ì´ ì„±ë¦½í•˜ì§€ ì•Šìœ¼ë‹ˆê¹Œ, ì»´íŒŒì¼ ì—ëŸ¬!!
}
```

```cpp
#include <iostream>
using namespace std;

class Base {
public:
    void BaseFunc() { cout << "Base Function" << endl; }
};

class Derived : public Base {
public:
    void DerivedFunc() { cout << "Derived Function" << endl; }
};

int main(void) {
    Derived * dptr = new Derived();
		Base * bptr = dptr
		// dptrì€ Derived í´ë˜ìŠ¤ì˜ í¬ì¸í„° ë³€ìˆ˜ë‹ˆê¹Œ, ì´ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ëŠ” ë¶„ëª… Base í´ë˜ìŠ¤ë¥¼ 
		// ì§ì ‘ í˜¹ì€ ê°„ì ‘ì ìœ¼ë¡œ ìƒì†í•˜ëŠ” ê°ì²´ì´ë‹¤. ê·¸ëŸ¬ë‹ˆ Baseí˜• í¬ì¸í„° ë³€ìˆ˜ë¡œë„ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤.
}
```

## ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„°ì˜ í˜•ì— ë”°ë¼ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì˜ ì¢…ë¥˜ì— ì œí•œì´ ë”°ë¥¸ë‹¤.

```cpp
#include <iostream>
using namespace std;

class First {
public:
    void FirstFunc() { cout << "FirstFunc" << endl; }
};

class Second : public First {
public:
    void SecondFunc() { cout << "SecondFunc" << endl; }
};

class Third : public Second {
public:
    void ThirdFunc() { cout << "ThirdFunc" << endl; }
};

int main(void) {
    Third * tptr = new Third();
    Second * sptr = tptr;
    First * fptr = sptr;

    tptr->FirstFunc();
    tptr->SecondFunc();
    tptr->ThirdFunc();

    sptr->FirstFunc();
    sptr->SecondFunc();
    sptr->ThirdFunc(); // x

    fptr->FirstFunc();
    fptr->SecondFunc(); // x
    fptr->ThirdFunc(); // x
}
```

**â†’ í¬ì¸í„° í˜•ì— í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ì— ì •ì˜ëœ ë©¤ë²„ë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.**

<aside>
ğŸ“Œ C++ ì»´íŒŒì¼ëŸ¬ëŠ” í¬ì¸í„° ì—°ì‚°ì˜ ê°€ëŠ¥ì„± ì—¬ë¶€ë¥¼ íŒë‹¨í•  ë•Œ, **í¬ì¸í„°ì˜ ìë£Œí˜•ì„ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨**í•˜ì§€, ì‹¤ì œ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì˜ ìë£Œí˜•ì„ ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

</aside>

## í•¨ìˆ˜ì˜ ì˜¤ë²„ë¼ì´ë”©ê³¼ í¬ì¸í„° í˜•

```cpp
#include <iostream>
using namespace std;

class First {
public:
    void MyFunc() { cout << "FirstFunc" << endl; }
};

class Second : public First {
public:
    void MyFunc() {
        cout << "SecondFunc" << endl;
    }
};

class Third : public Second {
public:
    void MyFunc() { cout << "ThirdFunc" << endl; }
};

int main(void) {
    Third * tptr = new Third();
    Second * sptr = tptr;
    First * fptr = sptr;

    fptr->MyFunc(); // fptrì€ Firstí˜• í¬ì¸í„° ë³€ìˆ˜ì´ë‹ˆ ì´ ê°ì²´ê°€ ê°€ë¦¬í‚¤ëŠ” ëŒ€ìƒìœ¼ë¡œ First í´ë˜ìŠ¤ì— ì •ì˜ëœ MyFunc í•¨ìˆ˜ëŠ” ë¬´ì¡°ê±´ í˜¸ì¶œí•  ìˆ˜ ìˆê² êµ¬ë‚˜!
    sptr->MyFunc(); // sptrì€ Secondí˜• í¬ì¸í„° ë³€ìˆ˜ì´ë¯€ë¡œ, ì´ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì—ëŠ” Firstì˜ MyFunc í•¨ìˆ˜ì™€ Secondì˜ MyFunc í•¨ìˆ˜ê°€ ì˜¤ë²„ë¼ì´ë”© ê´€ê³„ë¡œ ì¡´ì¬í•˜ëŠ”êµ°! ê·¸ëŸ¼ ì˜¤ë²„ë¼ì´ë”©ì„ í•œ Secondì˜ MyFunc í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ê² ë‹¤!!
    tptr->MyFunc(); // tptrì€ Thirdí˜• í¬ì¸í„° ë³€ìˆ˜ì´ê³ , ì´ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ì—ëŠ” 3ê°œì˜ MyFunc í•¨ìˆ˜ê°€ ìˆë‹¤. ê·¸ëŸ¼ ê°€ì¥ ë§ˆì§€ë§‰ì— ì˜¤ë²„ë¼ì´ë”©ì„ í•œ Third í´ë˜ìŠ¤ì˜ MyFunc í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ì§€!!
    delete tptr;
    return 0;
}
```

FirstFunc
SecondFunc
ThirdFunc

## ê°€ìƒí•¨ìˆ˜(Virtual Function)

```cpp
#include <iostream>
using namespace std;

class First {
public:
    virtual void MyFunc() { cout << "FirstFunc" << endl; }
};

class Second : public First {
public:
    virtual void MyFunc() {
        // First í´ë˜ìŠ¤ì˜ MyFunc í•¨ìˆ˜ë¥¼ virtual ì„ ì–¸í–ˆìœ¼ë‹ˆ, ì´ í•¨ìˆ˜ë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ëŠ” í˜„ì¬ í•¨ìˆ˜ë„ virtual ì„ ì–¸ ì—†ì´ ê°€ìƒí•¨ìˆ˜ê°€ ë¨.
        // í•˜ì§€ë§Œ ì´ë ‡ê²Œ virtual ì„ ì–¸ì„ ë„£ì–´ì„œ í•¨ìˆ˜ê°€ ê°€ìƒí•¨ìˆ˜ì„ì„ ì•Œë¦¬ëŠ” ê²ƒì´ ëª…ì‹œì ì„.
        cout << "SecondFunc" << endl;
    }
};

class Third : public Second {
public:
    virtual void MyFunc() { cout << "ThirdFunc" << endl; }
};

int main(void) {
    Third * tptr = new Third();
    Second * sptr = tptr;
    First * fptr = sptr;

    fptr->MyFunc(); // í•¨ìˆ˜ê°€ ê°€ìƒí•¨ìˆ˜ë¡œ ì„ ì–¸ë¨ -> í¬ì¸í„°ì˜ ìë£Œí˜•ì´ ì•„ë‹Œ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•¨!!
    sptr->MyFunc(); // ftpr, sptr, tptr ëª¨ë‘ Thrid í´ë˜ìŠ¤ì˜ ê°ì²´ì´ë¯€ë¡œ ë§ˆì§€ë§‰ìœ¼ë¡œ ì˜¤ë²„ë¼ì´ì´ë”© ëœ Third í´ë˜ìŠ¤ì˜ MyFunc í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
    tptr->MyFunc(); 
    delete tptr;
    return 0;
}
```

ThirdFunc
ThirdFunc
ThirdFunc

í•¨ìˆ˜ê°€ ê°€ìƒí•¨ìˆ˜ë¡œ ì„ ì–¸ë˜ë©´, í•´ë‹¹ í•¨ìˆ˜í˜¸ì¶œ ì‹œ, í¬ì¸í„°ì˜ ìë£Œí˜•ì„ ê¸°ë°˜ìœ¼ë¡œ í˜¸ì¶œëŒ€ìƒì„ ê²°ì •í•˜ì§€ ì•Šê³ , í¬ì¸í„° ë³€ìˆ˜ê°€ ì‹¤ì œë¡œ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ í˜¸ì¶œì˜ ëŒ€ìƒì„ ê²°ì •í•œë‹¤.

## â€˜ì˜¤ë Œì§€ë¯¸ë””ì–´ ê¸‰ì—¬ê´€ë¦¬ í™•ì¥ì„± ë¬¸ì œ'ì˜ ì™„ì „í•œ í•´ê²°

```cpp
#include <iostream>
#include <cstring>
using namespace std;

class Employee { // ì§ì› í´ë˜ìŠ¤
private:
    char name[100]; // ì´ ë¦„
public:
    Employee(char * name) { // ìƒì„±ì
        strcpy(this->name, name);
    }
    void ShowYourName() const { // ì´ë¦„ ì¶œë ¥ í•¨ìˆ˜
        cout << "name: " << name << endl;
    }
    virtual int GetPay() const {
        return 0;
    }
    virtual void ShowSalaryInfo() const {}
};

class PermanentWorker : public Employee { // ì •ê·œì§ í´ë˜ìŠ¤, ì •ê·œì§ IS-A ì§ì›
private:
    int salary; // ì›” ê¸‰ì—¬
public:
    PermanentWorker(char * name, int money) // ìƒì„±ì
        : Employee(name), salary(money) {}
    virtual int GetPay() const { // ì›” ê¸‰ì—¬ ë°˜í™˜ í•¨ìˆ˜
        return salary;
    }
    virtual void ShowSalaryInfo() const { // ê¸‰ì—¬ ì¶œë ¥ í•¨ìˆ˜
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl;
    }
};

class TemporaryWorker : public Employee { // ì„ì‹œì§ í´ë˜ìŠ¤, ì„ì‹œì§ IS-A ì§ì›
private:
    int workTime; // ì´ ë‹¬ì— ì¼í•œ ì‹œê°„ì˜ í•©ê³„
    int payPerHour; // ì‹œê°„ë‹¹ ê¸‰ì—¬
public:
    TemporaryWorker(char * name, int pay) // ìƒì„±ì
        : Employee(name), workTime(0), payPerHour(pay) {}
    void AddWorkTime(int time) { // ì¼í•œ ì‹œê°„ì˜ ì¶”ê°€
        workTime += time;
    }
    virtual int GetPay() const { // ì´ ë‹¬ì˜ ê¸‰ì—¬
        return workTime*payPerHour;
    }
    virtual void ShowSalaryInfo() const { // ì›” ê¸‰ì—¬ ì¶œë ¥ í•¨ìˆ˜
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl;
    }
};

class SalesWorker: public PermanentWorker { // ì˜ì—…ì§ í´ë˜ìŠ¤, ì„ì‹œì§ IS-A ì •ê·œì§, ì§ì›
private:
    int salesResult; // ì›” íŒë§¤ì‹¤ì 
    double bonusRatio; // ìƒì—¬ê¸ˆ ë¹„ìœ¨
public:
    SalesWorker(char * name, int money, double ratio) // ìƒì„±ì
        : PermanentWorker(name, money), salesResult(0), bonusRatio(ratio) {}
    void AddSalesResult(int value) { // íŒë§¤ì‹¤ì  ì¶”ê°€
        salesResult += value;
    }
    // í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”© -> SalesWorker í´ë˜ìŠ¤ ë‚´ì—ì„œ GeyPay()ë¥¼ í˜¸ì¶œí•˜ë©´, ì¬ì •ì˜ëœ GetPay()í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
    // PermanentWorker í´ë˜ìŠ¤ì—ì„œ ì •ì˜ëœ GeyPay() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´, PermanentWorker::GetPay() ë°©ì‹ì„ ì´ìš©í•´ì•¼ í•¨.
    virtual int GetPay() const { // ì›” ê¸‰ì—¬
        return PermanentWorker::GetPay() + (int)(salesResult*bonusRatio); // PermanentWorkerì˜ GetPay í•¨ìˆ˜ í˜¸ì¶œ
    }
    virtual void ShowSalaryInfo() const {
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl; // SalesWorkerì˜ GetPay í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
    }
};

class EmployeeHandler { // ì»¨íŠ¸ë¡¤ í´ë˜ìŠ¤
private:
    Employee * empList[50]; // ê°ì²´ ì£¼ì†Œ ì €ì¥ ë°°ì—´
    int empNum; // ê°ì²´ ì´ ê°œìˆ˜
public:
    EmployeeHandler() : empNum(0) {} // ìƒì„±ì
    void AddEmployee(Employee * emp) { // ì§ì› ì¶”ê°€ í•¨ìˆ˜, ì €ì¥ì˜ ëŒ€ìƒì´ PermanentWorkerì—ì„œ Employee ê°ì²´ë¡œ ë°”ë€œ
        // ê³ ìš©ì¸ì˜ í˜•íƒœê°€ ë‹¤ì–‘í•´ì§ì„ ë°˜ì˜, ëª¨ë‘ Employeeë¥¼ ìƒì†ë°›ìœ¼ë¯€ë¡œ ê°ì²´ ì €ì¥ ê°€ëŠ¥
        empList[empNum++] = emp; // Employee í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í´ë˜ìŠ¤ì˜ ê°ì²´ë„ ì´ ë°°ì—´ì— ì €ì¥ì´ ê°€ëŠ¥í•¨!!
    }
    void ShowAllSalaryInfo() const {
        /*
         * // ìˆ˜ì • ì „
         * for (int i = 0; i < empNum; i++) {
         *      empList[i]->ShowSalaryInfo();
         * } // ë°°ì—´ì„ êµ¬ì„±í•˜ëŠ” í¬ì¸í„° ë³€ìˆ˜ê°€ Employeeí˜• í¬ì¸í„° ë³€ìˆ˜ì´ë¯€ë¡œ,
         *   // Employee í´ë˜ìŠ¤ì˜ ë©¤ë²„ê°€ ì•„ë‹Œ GetPay í•¨ìˆ˜ì™€ ShowSalaryInfo í•¨ìˆ˜ì˜ í˜¸ì¶œë¶€ë¶„ì—ì„œ ì—ëŸ¬ ë°œìƒ
         *   // í•´ê²°: Employee í´ë˜ìŠ¤ì— GetPay í•¨ìˆ˜ì™€ ShowSalaryInfo í•¨ìˆ˜ë¥¼ ì¶”ê°€ë¡œ ì •ì˜í•˜ê³ , ì´ë¥¼ ê°€ìƒí•¨ìˆ˜ë¡œ ì„ ì–¸
         */
        for (int i = 0; i < empNum; i++) {
            empList[i]->ShowSalaryInfo();
        }
    }
    void ShowTotalSalary() const {
        int sum = 0;
        /*
         * for (int i = 0; i < empNum; i++) {
         *      sum += empList[i]->GetPay();
         * } // ìœ„ì˜ í•´ê²°ë°©ë²•ê³¼ ë§ˆì°¬ê°€ì§€
         */
        for (int i = 0; i < empNum; i++) {
            sum += empList[i]->GetPay();
        }
        cout << "salary sum: " << sum << endl;
    }
    ~EmployeeHandler() { // ì†Œë©¸ì
        for (int i = 0; i < empNum; i++) {
            delete empList[i]; // ë™ì  í• ë‹¹ëœ ê°ì²´ë“¤ ë©”ëª¨ë¦¬ í•´ì œ
        }
    }
};

int main(void) {
    // ì§ì›ê´€ë¦¬ë¥¼ ëª©ì ìœ¼ë¡œ ì„¤ê³„ëœ ì»¨íŠ¸ë¡¤ í´ë˜ìŠ¤ì˜ ê°ì²´ ìƒì„±
    EmployeeHandler handler;

    // ì •ê·œì§ ë“±ë¡
    handler.AddEmployee(new PermanentWorker("KIM", 1000)); // ë™ì  í• ë‹¹
    handler.AddEmployee(new PermanentWorker("LEE", 1500));

    // ì„ì‹œì§ ë“±ë¡
    TemporaryWorker * alba = new TemporaryWorker("Jung", 700);
    alba->AddWorkTime(5); // 5ì‹œê°„ ì¼í•œ ê²°ê³¼ ë“±ë¡
    handler.AddEmployee(alba);

    // ì˜ì—…ì§ ë“±ë¡
    SalesWorker * seller = new SalesWorker("Hong", 1000, 0.1);
    seller->AddSalesResult(7000); // ì˜ì—…ì‹¤ì  7000
    handler.AddEmployee(seller);

    // ì´ë²ˆ ë‹¬ì— ì§€ë¶ˆí•´ì•¼ í•  ê¸‰ì—¬ì˜ ì •ë³´
    handler.ShowAllSalaryInfo();

    // ì´ë²ˆ ë‹¬ì— ì§€ë¶ˆí•´ì•¼ í•  ê¸‰ì—¬ì˜ ì´í•©
    handler.ShowTotalSalary();
    return 0;
}
```

name: KIM
salary: 1000

name: LEE
salary: 1500

name: Jung
salary: 3500

name: Hong
salary: 1700

salary sum: 7700

## â€˜ì˜¤ë Œì§€ë¯¸ë””ì–´ ê¸‰ì—¬ê´€ë¦¬ í™•ì¥ì„± ë¬¸ì œ'ì˜ í•´ê²°ì„ í†µí•´ì„œ í™•ì¸í•œ ìƒì†ì˜ ì´ìœ 

<aside>
ğŸ“Œ ìƒì†ì„ í†µí•´ ì—°ê´€ëœ ì¼ë ¨ì˜ í´ë˜ìŠ¤ì— ëŒ€í•´ ê³µí†µì ì¸ ê·œì•½ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

</aside>

<aside>
ğŸ“Œ ìƒì†ì„ í†µí•´ ì—°ê´€ëœ ì¼ë ¨ì˜ í´ë˜ìŠ¤ PermanentWorker, TemporaryWorker, SalesWorkerì— ê³µí†µì ì¸ ê·œì•½(â†’Employeeì— ì •ì˜)ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

</aside>

## ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜(Pure Virtual Function)ì™€ ì¶”ìƒ í´ë˜ìŠ¤(Abstract Class)

```cpp
class Employee { // ì§ì› í´ë˜ìŠ¤
private:
    char name[100]; // ì´ ë¦„
public:
    Employee(char * name) { // ìƒì„±ì
        strcpy(this->name, name);
    }
    void ShowYourName() const { // ì´ë¦„ ì¶œë ¥ í•¨ìˆ˜
        cout << "name: " << name << endl;
    }
    virtual int GetPay() const {
        return 0;
    }
    virtual void ShowSalaryInfo() const {}
};
```

Employee í´ë˜ìŠ¤ëŠ” ê¸°ì´ˆ í´ë˜ìŠ¤ë¡œì„œë§Œ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ë¿, ê°ì²´ì˜ ìƒì„±ì„ ëª©ì ìœ¼ë¡œ ì •ì˜ëœ í´ë˜ìŠ¤ëŠ” ì•„ë‹ˆë‹¤. ì´ë ‡ë“¯ í´ë˜ìŠ¤ ì¤‘ì—ëŠ” ê°ì²´ìƒì„±ì„ ëª©ì ìœ¼ë¡œ ì •ì˜ë˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ë„ ì¡´ì¬í•œë‹¤.

```cpp
Employee * emp = new Employee("Lee Dong Sook");
```

ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì¥ì€ ë¬¸ë²•ì ìœ¼ë¡œ ì•„ë¬´ ë¬¸ì œê°€ ì—†ê¸°ì—, ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ë°œê²¬ë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ´ ë•, ê°€ìƒí•¨ìˆ˜ë¥¼ â€˜ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜'ë¡œ ì„ ì–¸í•˜ì—¬ ê°ì²´ì˜ ìƒì„±ì„ ë¬¸ë²•ì ìœ¼ë¡œ ë§‰ëŠ” ê²ƒì´ ì¢‹ë‹¤.

```cpp
class Employee { // ì§ì› í´ë˜ìŠ¤
private:
    char name[100]; // ì´ ë¦„
public:
    Employee(char * name) { // ìƒì„±ì
        strcpy(this->name, name);
    }
    void ShowYourName() const { // ì´ë¦„ ì¶œë ¥ í•¨ìˆ˜
        cout << "name: " << name << endl;
    }
    virtual int GetPay() const = 0; // ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜ -> Employee ê°ì²´ ìƒì„±ì„ ë§‰ìŒ
    virtual void ShowSalaryInfo() const = 0; // ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜
};
```

<aside>
ğŸ“Œ â€˜ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜'ë€ â€˜í•¨ìˆ˜ì˜ ëª¸ì²´ê°€ ì •ì˜ë˜ì§€ ì•Šì€ í•¨ìˆ˜â€™ë¥¼ ì˜ë¯¸í•œë‹¤.

</aside>

â†’ â€˜ëª…ì‹œì ìœ¼ë¡œ ëª¸ì²´ë¥¼ ì •ì˜í•˜ì§€ ì•Šì•˜ìŒâ€™ì„ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë¦¼.

- ì˜ëª»ëœ ê°ì²´ì˜ ìƒì„±ì„ ë§‰ìŒ
- ì‹¤ì œë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ë¥¼ ëª…í™•íˆ ëª…ì‹œí•¨

ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜ë¡œ ì„ ì–¸í•œ í´ë˜ìŠ¤ë¥¼ â€˜ì¶”ìƒ í´ë˜ìŠ¤â€™ë¼ í•œë‹¤. ì´ëŠ” ì™„ì „í•˜ì§€ ì•Šì€, ê°ì²´ ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•œ í´ë˜ìŠ¤ë¼ëŠ” ì˜ë¯¸ë¥¼ ì§€ë‹Œë‹¤.

## ë¬¸ì œ 08-1 [ìƒì† ê´€ê³„ì˜ í™•ì¥ê³¼ ì¶”ìƒ í´ë˜ìŠ¤]

```cpp
#include <iostream>
#include <cstring>
using namespace std;

class Employee { // ì§ì› í´ë˜ìŠ¤
private:
    char name[100]; // ì´ ë¦„
public:
    Employee(char * name) { // ìƒì„±ì
        strcpy(this->name, name);
    }
    void ShowYourName() const { // ì´ë¦„ ì¶œë ¥ í•¨ìˆ˜
        cout << "name: " << name << endl;
    }
    virtual int GetPay() const = 0; // ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜ -> Employee ê°ì²´ ìƒì„±ì„ ë§‰ìŒ
    virtual void ShowSalaryInfo() const = 0; // ìˆœìˆ˜ ê°€ìƒí•¨ìˆ˜
};

class PermanentWorker : public Employee { // ì •ê·œì§ í´ë˜ìŠ¤, ì •ê·œì§ IS-A ì§ì›
private:
    int salary; // ì›” ê¸‰ì—¬
public:
    PermanentWorker(char * name, int money) // ìƒì„±ì
        : Employee(name), salary(money) {}
    virtual int GetPay() const { // ì›” ê¸‰ì—¬ ë°˜í™˜ í•¨ìˆ˜
        return salary;
    }
    virtual void ShowSalaryInfo() const { // ê¸‰ì—¬ ì¶œë ¥ í•¨ìˆ˜
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl;
    }
};

class TemporaryWorker : public Employee { // ì„ì‹œì§ í´ë˜ìŠ¤, ì„ì‹œì§ IS-A ì§ì›
private:
    int workTime; // ì´ ë‹¬ì— ì¼í•œ ì‹œê°„ì˜ í•©ê³„
    int payPerHour; // ì‹œê°„ë‹¹ ê¸‰ì—¬
public:
    TemporaryWorker(char * name, int pay) // ìƒì„±ì
        : Employee(name), workTime(0), payPerHour(pay) {}
    void AddWorkTime(int time) { // ì¼í•œ ì‹œê°„ì˜ ì¶”ê°€
        workTime += time;
    }
    virtual int GetPay() const { // ì´ ë‹¬ì˜ ê¸‰ì—¬
        return workTime*payPerHour;
    }
    virtual void ShowSalaryInfo() const { // ì›” ê¸‰ì—¬ ì¶œë ¥ í•¨ìˆ˜
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl;
    }
};

class SalesWorker: public PermanentWorker { // ì˜ì—…ì§ í´ë˜ìŠ¤, ì„ì‹œì§ IS-A ì •ê·œì§, ì§ì›
private:
    int salesResult; // ì›” íŒë§¤ì‹¤ì 
    double bonusRatio; // ìƒì—¬ê¸ˆ ë¹„ìœ¨
public:
    SalesWorker(char * name, int money, double ratio) // ìƒì„±ì
        : PermanentWorker(name, money), salesResult(0), bonusRatio(ratio) {}
    virtual void AddSalesResult(int value) { // íŒë§¤ì‹¤ì  ì¶”ê°€
        salesResult += value;
    }
    // í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë”© -> SalesWorker í´ë˜ìŠ¤ ë‚´ì—ì„œ GeyPay()ë¥¼ í˜¸ì¶œí•˜ë©´, ì¬ì •ì˜ëœ GetPay()í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
    // PermanentWorker í´ë˜ìŠ¤ì—ì„œ ì •ì˜ëœ GeyPay() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´, PermanentWorker::GetPay() ë°©ì‹ì„ ì´ìš©í•´ì•¼ í•¨.
    virtual int GetPay() const { // ì›” ê¸‰ì—¬
        return PermanentWorker::GetPay() + (int)(salesResult*bonusRatio); // PermanentWorkerì˜ GetPay í•¨ìˆ˜ í˜¸ì¶œ
    }
    virtual void ShowSalaryInfo() const {
        ShowYourName();
        cout << "salary: " << GetPay() << endl << endl; // SalesWorkerì˜ GetPay í•¨ìˆ˜ê°€ í˜¸ì¶œë¨.
    }
};

namespace RISK_LEVEL { // ì´ë¦„ê³µê°„ ì•ˆì— enum ì •ì˜
    enum {RISK_A=30,RISK_B=20,RISK_C=10};
}

class ForeignSalesWorker : public SalesWorker { // í•´ì™¸ ì˜ì—…ì§ í´ë˜ìŠ¤, í•´ì™¸ ì˜ì—…ì§ IS-A ì˜ì—…ì§, ì •ê·œì§
private:
    const int riskLevel; // ìœ„í—˜ ìˆ˜ì¤€
public:
    ForeignSalesWorker(char * name, int money, double ratio, int risk) // ìƒì„±ì
        : SalesWorker(name, money, ratio), riskLevel(risk) {} // riskLevelì—ëŠ” 30, 20, 10 ë“±ì´ ë“¤ì–´ê°
    int GetRiskPay() const { // ìœ„í—˜ìˆ˜ë‹¹ ê³„ì‚°
        return (int)(SalesWorker::GetPay() * (riskLevel/100.0)); // ìœ„í—˜ ìˆ˜ë‹¹ ì¶”ê°€ ì „ ê³„ì‚°ì€ ì˜ì—…ì§ ê¸‰ì—¬ ê³„ì‚° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ í•´ê²°
    }
    virtual int GetPay() const { // ì´ ê¸‰ì—¬
        return SalesWorker::GetPay() + GetRiskPay(); // ì˜ì—…ì§ ê¸‰ì—¬ + ìœ„í—˜ìˆ˜ë‹¹
    }
    virtual void ShowSalaryInfo() const {
        ShowYourName();
        cout << "salary: " << SalesWorker::GetPay() << endl;
        cout << "risk pay: " << GetRiskPay() << endl;
        cout << "sum: " << GetPay() << endl << endl;
    }
};

class EmployeeHandler { // ì»¨íŠ¸ë¡¤ í´ë˜ìŠ¤
private:
    Employee * empList[50]; // ê°ì²´ ì£¼ì†Œ ì €ì¥ ë°°ì—´
    int empNum; // ê°ì²´ ì´ ê°œìˆ˜
public:
    EmployeeHandler() : empNum(0) {} // ìƒì„±ì
    void AddEmployee(Employee * emp) { // ì§ì› ì¶”ê°€ í•¨ìˆ˜, ì €ì¥ì˜ ëŒ€ìƒì´ PermanentWorkerì—ì„œ Employee ê°ì²´ë¡œ ë°”ë€œ
        // ê³ ìš©ì¸ì˜ í˜•íƒœê°€ ë‹¤ì–‘í•´ì§ì„ ë°˜ì˜, ëª¨ë‘ Employeeë¥¼ ìƒì†ë°›ìœ¼ë¯€ë¡œ ê°ì²´ ì €ì¥ ê°€ëŠ¥
        empList[empNum++] = emp; // Employee í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” í´ë˜ìŠ¤ì˜ ê°ì²´ë„ ì´ ë°°ì—´ì— ì €ì¥ì´ ê°€ëŠ¥í•¨!!
    }
    void ShowAllSalaryInfo() const {
        /*
         * // ìˆ˜ì • ì „
         * for (int i = 0; i < empNum; i++) {
         *      empList[i]->ShowSalaryInfo();
         * } // ë°°ì—´ì„ êµ¬ì„±í•˜ëŠ” í¬ì¸í„° ë³€ìˆ˜ê°€ Employeeí˜• í¬ì¸í„° ë³€ìˆ˜ì´ë¯€ë¡œ,
         *   // Employee í´ë˜ìŠ¤ì˜ ë©¤ë²„ê°€ ì•„ë‹Œ GetPay í•¨ìˆ˜ì™€ ShowSalaryInfo í•¨ìˆ˜ì˜ í˜¸ì¶œë¶€ë¶„ì—ì„œ ì—ëŸ¬ ë°œìƒ
         *   // í•´ê²°: Employee í´ë˜ìŠ¤ì— GetPay í•¨ìˆ˜ì™€ ShowSalaryInfo í•¨ìˆ˜ë¥¼ ì¶”ê°€ë¡œ ì •ì˜í•˜ê³ , ì´ë¥¼ ê°€ìƒí•¨ìˆ˜ë¡œ ì„ ì–¸
         */
        for (int i = 0; i < empNum; i++) {
            empList[i]->ShowSalaryInfo();
        }
    }
    void ShowTotalSalary() const {
        int sum = 0;
        /*
         * for (int i = 0; i < empNum; i++) {
         *      sum += empList[i]->GetPay();
         * } // ìœ„ì˜ í•´ê²°ë°©ë²•ê³¼ ë§ˆì°¬ê°€ì§€
         */
        for (int i = 0; i < empNum; i++) {
            sum += empList[i]->GetPay();
        }
        cout << "salary sum: " << sum << endl;
    }
    ~EmployeeHandler() { // ì†Œë©¸ì
        for (int i = 0; i < empNum; i++) {
            delete empList[i]; // ë™ì  í• ë‹¹ëœ ê°ì²´ë“¤ ë©”ëª¨ë¦¬ í•´ì œ
        }
    }
};

int main(void) {
    // ì§ì›ê´€ë¦¬ë¥¼ ëª©ì ìœ¼ë¡œ ì„¤ê³„ëœ ì»¨íŠ¸ë¡¤ í´ë˜ìŠ¤ì˜ ê°ì²´ ìƒì„±
    EmployeeHandler handler;

    // í•´ì™¸ ì˜ì—…ì§ ë“±ë¡
    ForeignSalesWorker * fseller1 = new ForeignSalesWorker("Hong", 1000, 0.1, RISK_LEVEL::RISK_A);
    fseller1->AddSalesResult(7000);
    handler.AddEmployee(fseller1);

    ForeignSalesWorker * fseller2 = new ForeignSalesWorker("Yoon", 1000, 0.1, RISK_LEVEL::RISK_B);
    fseller2->AddSalesResult(7000);
    handler.AddEmployee(fseller2);

    ForeignSalesWorker * fseller3 = new ForeignSalesWorker("Lee", 1000, 0.1, RISK_LEVEL::RISK_C);
    fseller3->AddSalesResult(7000);
    handler.AddEmployee(fseller3);

    // ì •ê·œì§ ë“±ë¡
    handler.AddEmployee(new PermanentWorker("KIM", 1000)); // ë™ì  í• ë‹¹
    handler.AddEmployee(new PermanentWorker("LEE", 1500));

    // ì„ì‹œì§ ë“±ë¡
    TemporaryWorker * alba = new TemporaryWorker("Jung", 700);
    alba->AddWorkTime(5); // 5ì‹œê°„ ì¼í•œ ê²°ê³¼ ë“±ë¡
    handler.AddEmployee(alba);

    // ì˜ì—…ì§ ë“±ë¡
    SalesWorker * seller = new SalesWorker("Hong", 1000, 0.1);
    seller->AddSalesResult(7000); // ì˜ì—…ì‹¤ì  7000
    handler.AddEmployee(seller);

    // ì´ë²ˆ ë‹¬ì— ì§€ë¶ˆí•´ì•¼ í•  ê¸‰ì—¬ì˜ ì •ë³´
    handler.ShowAllSalaryInfo();

    // ì´ë²ˆ ë‹¬ì— ì§€ë¶ˆí•´ì•¼ í•  ê¸‰ì—¬ì˜ ì´í•©
    handler.ShowTotalSalary();
    return 0;
}
```

## ë‹¤í˜•ì„±(Polymorphism)

â€˜ë‹¤í˜•ì„±'ì´ë€ â€˜ë™ì§ˆì´ìƒ'ì„ ì˜ë¯¸í•œë‹¤. â€œëª¨ìŠµì€ ê°™ìœ¼ë„¤ í˜•íƒœëŠ” ë‹¤ë¥´ë‹¤" â†’ â€œë¬¸ì¥ì€ ê°™ì€ë° ê²°ê³¼ëŠ” ë‹¤ë¥´ë‹¤â€

```cpp
#include <iostream>
using namespace std;

class First {
public:
    virtual void SimpleFunc() { cout << "FirstFunc" << endl; }
};

class Second : public First {
public:
    virtual void SimpleFunc() {
        cout << "SecondFunc" << endl;
    }
};

int main(void) {
    First * ptr = new First();
    ptr->SimpleFunc();
    delete ptr;

    ptr = new Second();
    ptr->SimpleFunc();
    delete ptr;
    return 0;
}
```

ìœ„ì˜ main í•¨ìˆ˜ì—ëŠ” ptrâ†’SimpleFunc();ë¼ëŠ” ë¬¸ì¥ì´ 2ë²ˆ ë‚˜ì˜¤ì§€ë§Œ ì‹¤í–‰ ê²°ê³¼ëŠ” ë‹¤ë¥´ë‹¤. í¬ì¸í„° ë³€ìˆ˜ ptrì´ ì°¸ì¡°í•˜ëŠ” ê°ì²´ì˜ ìë£Œí˜•ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ì´ê²ƒì´ ë°”ë¡œ C++ì—ì„œ â€˜ë‹¤í˜•ì„±'ì˜ ì˜ˆì´ë‹¤.